{"version":3,"file":"main.js","sources":["../main.js"],"sourcesContent":["// import gsap from 'gsap'\r\n// import Flip from 'gsap/Flip'\r\n//\r\n// gsap.registerPlugin(Flip)\r\n//\r\n// import * as BABYLON from 'babylonjs'\r\n// Select the element to animate using the correct class nam\r\n//\r\nfunction main() {\r\n  'use strict'\r\n\r\n  if (!document.startViewTransition) {\r\n    console.error('View Transitions API is not supported in this browser.')\r\n    return\r\n  }\r\n\r\n  window.addEventListener('load', () => {\r\n    // Determine if we're on the source page by checking for the transition button.\r\n    const btn = document.getElementById('transitionBtn')\r\n    let container = document.querySelector('.vt__container')\r\n\r\n    if (btn) {\r\n      // Source page: if container isn't found, fallback to document.body.\r\n      if (!container) {\r\n        console.warn('Container with class \"vt__container\" not found on source page. Using document.body as fallback.')\r\n        container = document.body\r\n      }\r\n    } else {\r\n      // Destination page: container must exist.\r\n      if (!container) {\r\n        console.error('On destination page, container with class \"vt__container\" not found.')\r\n        return\r\n      }\r\n    }\r\n\r\n    let box\r\n\r\n    // On destination page, check sessionStorage for stored box HTML.\r\n    const storedBoxHTML = sessionStorage.getItem('sharedBoxHTML')\r\n    if (storedBoxHTML) {\r\n      const temp = document.createElement('div')\r\n      temp.innerHTML = storedBoxHTML.trim()\r\n      box = temp.firstChild\r\n      container.appendChild(box)\r\n      sessionStorage.removeItem('sharedBoxHTML')\r\n      console.log('Box recreated from stored HTML and appended to container:', box)\r\n    } else {\r\n      // Otherwise, look for an existing box.\r\n      box = document.querySelector('.vt__box')\r\n      if (!box) {\r\n        // If not found, create it.\r\n        box = document.createElement('div')\r\n        box.className = 'vt__box'\r\n        box.textContent = 'Shared Box'\r\n        container.appendChild(box)\r\n        console.log('New box created and appended:', box)\r\n      } else {\r\n        console.log('Existing box found:', box)\r\n      }\r\n    }\r\n    // Set the shared view transition name so the browser can match the element.\r\n    box.style.setProperty('view-transition-name', 'shared-box')\r\n\r\n    // Source page logic: attach the click handler if the transition button exists.\r\n    if (btn) {\r\n      console.log('Transition button found (source page).')\r\n      btn.addEventListener('click', () => {\r\n        // On the source page, before transitioning, store the box's outerHTML.\r\n        const sourceBox = document.querySelector('.vt__box')\r\n        if (sourceBox) {\r\n          sessionStorage.setItem('sharedBoxHTML', sourceBox.outerHTML)\r\n          console.log('Stored box HTML for transition.')\r\n        }\r\n        // Start the view transition and navigate to the destination page.\r\n        document.startViewTransition(() => {\r\n          window.location.href = 'https://buffer-631024.webflow.io/view-transition-api/page-b'\r\n        })\r\n      })\r\n    } else {\r\n      console.log('No transition button found. Assuming destination page.')\r\n    }\r\n  })\r\n}\r\nmain()\r\n"],"names":["f","main","btn","container","box","storedBoxHTML","temp","sourceBox"],"mappings":"CAAA,SAAAA,EAAA,CAAA,OAAA,QAAA,YAAA,OAAA,IAAA,OAAAA,CAAA,EAAAA,EAAA,CAAA,GAAA,UAAA,CAAA,aAQA,SAASC,GAAO,CAGd,GAAI,CAAC,SAAS,oBAAqB,CACjC,QAAQ,MAAM,wDAAwD,EACtE,MACD,CAED,OAAO,iBAAiB,OAAQ,IAAM,CAEpC,MAAMC,EAAM,SAAS,eAAe,eAAe,EACnD,IAAIC,EAAY,SAAS,cAAc,gBAAgB,EAEvD,GAAID,EAEGC,IACH,QAAQ,KAAK,iGAAiG,EAC9GA,EAAY,SAAS,cAInB,CAACA,EAAW,CACd,QAAQ,MAAM,sEAAsE,EACpF,MACD,CAGH,IAAIC,EAGJ,MAAMC,EAAgB,eAAe,QAAQ,eAAe,EAC5D,GAAIA,EAAe,CACjB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAYD,EAAc,KAAM,EACrCD,EAAME,EAAK,WACXH,EAAU,YAAYC,CAAG,EACzB,eAAe,WAAW,eAAe,EACzC,QAAQ,IAAI,4DAA6DA,CAAG,CAClF,MAEMA,EAAM,SAAS,cAAc,UAAU,EAClCA,EAQH,QAAQ,IAAI,sBAAuBA,CAAG,GANtCA,EAAM,SAAS,cAAc,KAAK,EAClCA,EAAI,UAAY,UAChBA,EAAI,YAAc,aAClBD,EAAU,YAAYC,CAAG,EACzB,QAAQ,IAAI,gCAAiCA,CAAG,GAMpDA,EAAI,MAAM,YAAY,uBAAwB,YAAY,EAGtDF,GACF,QAAQ,IAAI,wCAAwC,EACpDA,EAAI,iBAAiB,QAAS,IAAM,CAElC,MAAMK,EAAY,SAAS,cAAc,UAAU,EAC/CA,IACF,eAAe,QAAQ,gBAAiBA,EAAU,SAAS,EAC3D,QAAQ,IAAI,iCAAiC,GAG/C,SAAS,oBAAoB,IAAM,CACjC,OAAO,SAAS,KAAO,6DACjC,CAAS,CACT,CAAO,GAED,QAAQ,IAAI,wDAAwD,CAE1E,CAAG,CACH,CACAN,EAAI,CAAA,CAAA"}